# å¿«é€Ÿéƒ¨ç½²è¯´æ˜ ğŸš€

## ğŸ“ æ–‡ä»¶æ¸…å•

ä¸ºäº†æˆåŠŸéƒ¨ç½²SSL HTTPSæœåŠ¡ï¼Œæ‚¨éœ€è¦ä»¥ä¸‹æ–‡ä»¶ï¼š

### å¿…éœ€æ–‡ä»¶
- âœ… `server-https.js` - æ”¯æŒHTTPSçš„æœåŠ¡å™¨æ–‡ä»¶
- âœ… `ecosystem.config.js` - PM2é…ç½®æ–‡ä»¶ï¼ˆå·²æ›´æ–°ï¼‰
- âœ… `package.json` - é¡¹ç›®ä¾èµ–é…ç½®ï¼ˆå·²æ›´æ–°ï¼‰
- âœ… `deploy-ssl.sh` - è‡ªåŠ¨éƒ¨ç½²è„šæœ¬
- âœ… `env.example` - ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹
- âœ… `lengthwords.top.key` - é˜¿é‡Œäº‘SSLç§é’¥æ–‡ä»¶
- âœ… `lengthwords.top.pem` - é˜¿é‡Œäº‘SSLè¯ä¹¦æ–‡ä»¶

### å‚è€ƒæ–‡ä»¶
- ğŸ“– `SSLéƒ¨ç½²æŒ‡å—.md` - è¯¦ç»†éƒ¨ç½²æŒ‡å—
- ğŸ“– `éƒ¨ç½²è¯´æ˜.md` - æœ¬æ–‡ä»¶

## âš¡ ä¸‰æ­¥å¿«é€Ÿéƒ¨ç½²

### ç¬¬1æ­¥ï¼šä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
sudo mkdir -p /home/english-learning
cd /home/english-learning

# ä¸Šä¼ æ‰€æœ‰å¿…éœ€æ–‡ä»¶åˆ°è¿™ä¸ªç›®å½•
# ä½¿ç”¨scpã€sftpæˆ–å…¶ä»–æ–¹å¼ä¸Šä¼ æ–‡ä»¶
```

### ç¬¬2æ­¥ï¼šè¿è¡Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy-ssl.sh

# ä»¥rootæƒé™è¿è¡Œéƒ¨ç½²è„šæœ¬
sudo ./deploy-ssl.sh
```

### ç¬¬3æ­¥ï¼šéªŒè¯éƒ¨ç½²
```bash
# æµ‹è¯•HTTPS API
curl -k https://lengthwords.top/api/test

# æ£€æŸ¥PM2çŠ¶æ€
pm2 status
```

## ğŸ”§ æ‰‹åŠ¨éƒ¨ç½²å‘½ä»¤

å¦‚æœè‡ªåŠ¨è„šæœ¬å¤±è´¥ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰‹åŠ¨éƒ¨ç½²ï¼š

```bash
# 1. åˆ›å»ºSSLç›®å½•å¹¶å¤åˆ¶è¯ä¹¦
sudo mkdir -p /home/ssl
sudo cp lengthwords.top.key /home/ssl/
sudo cp lengthwords.top.pem /home/ssl/
sudo chmod 600 /home/ssl/lengthwords.top.key
sudo chmod 644 /home/ssl/lengthwords.top.pem

# 2. åˆ›å»ºç¯å¢ƒé…ç½®
cat > .env << 'EOF'
NODE_ENV=production
HTTP_PORT=80
HTTPS_PORT=443
JWT_SECRET=your-super-secret-key-change-this
SSL_KEY_PATH=/home/ssl/lengthwords.top.key
SSL_CERT_PATH=/home/ssl/lengthwords.top.pem
EOF

# 3. å®‰è£…ä¾èµ–
npm install

# 4. å¯åŠ¨HTTPSæœåŠ¡
pm2 start ecosystem.config.js --only english-learning-https --env production
pm2 startup
pm2 save

# 5. é…ç½®é˜²ç«å¢™
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
```

## ğŸ“± å°ç¨‹åºé…ç½®æ›´æ–°

éƒ¨ç½²å®Œæˆåï¼Œæ›´æ–°æ‚¨çš„å°ç¨‹åºä»£ç ï¼š

```javascript
// å°†APIåŸºç¡€URLæ”¹ä¸ºHTTPS
const API_BASE_URL = 'https://lengthwords.top';

// ç¤ºä¾‹APIè°ƒç”¨
wx.request({
  url: `${API_BASE_URL}/api/test`,
  method: 'GET',
  success: (res) => {
    console.log('HTTPS APIè¿æ¥æˆåŠŸ:', res.data);
  },
  fail: (err) => {
    console.error('APIè¿æ¥å¤±è´¥:', err);
  }
});
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **è¯ä¹¦æ–‡ä»¶ä¸å­˜åœ¨**
   - ç¡®ä¿`lengthwords.top.key`å’Œ`lengthwords.top.pem`åœ¨å½“å‰ç›®å½•
   - æ£€æŸ¥æ–‡ä»¶æƒé™å’Œè·¯å¾„

2. **ç«¯å£è¢«å ç”¨**
   ```bash
   sudo lsof -i :443
   sudo kill -9 <PID>
   ```

3. **é˜²ç«å¢™é—®é¢˜**
   - æ£€æŸ¥é˜¿é‡Œäº‘å®‰å…¨ç»„é…ç½®
   - ç¡®ä¿å¼€æ”¾80å’Œ443ç«¯å£

4. **PM2æœåŠ¡å¯åŠ¨å¤±è´¥**
   ```bash
   pm2 logs english-learning-https
   pm2 restart english-learning-https
   ```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹è¯¦ç»†çš„`SSLéƒ¨ç½²æŒ‡å—.md`
2. æ£€æŸ¥æœåŠ¡æ—¥å¿—ï¼š`pm2 logs english-learning-https`
3. éªŒè¯è¯ä¹¦æœ‰æ•ˆæ€§ï¼š`openssl x509 -in /home/ssl/lengthwords.top.pem -text -noout`

---

ğŸ‰ **éƒ¨ç½²æˆåŠŸåï¼Œæ‚¨çš„å°ç¨‹åºå°±å¯ä»¥é€šè¿‡HTTPSå®‰å…¨è®¿é—®APIäº†ï¼**
